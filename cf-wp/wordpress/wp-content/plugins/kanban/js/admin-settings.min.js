function set_positions(){jQuery(".sortable").each(function(){jQuery("li",this).each(function(a){for(var b=a+"";b.length<3;)b="0"+b;jQuery(".position",this).val(b)})})}jQuery(function(a){function b(b){a('.nav-tab[href="'+b+'"]').addClass("nav-tab-active"),a(".nav-tab").not('[href="'+b+'"]').removeClass("nav-tab-active"),a(".tab").not(b).hide(),a(b).show()}a(".nav-tab").on("click",function(){var c=a(this),d=c.attr("href");b(d);var e=d.replace(/^.*#/,""),f=document.getElementById(e);return f.id=e+"-tmp",window.location.hash=d,f.id=e,!1}),"undefined"!=typeof window.location.hash&&""!==window.location.hash&&b(window.location.hash),a(".color-picker").wpColorPicker(),a(".slide-toggle").on("click",function(){var b=a(this).attr("href");return a(b).slideToggle("fast"),!1}),a(".button-sortable-add").on("click",function(){var b=a(this),c=b.attr("data-t"),d=new t(a("#"+c).html()),e=b.closest(".tab"),f=a(".sortable",e),g=a("li.new",f).length,h=d.render();h=h.replace(/\[count\]/g,"["+g+"]");var i=a(h).addClass("new").appendTo(f);a("[data-name]",i).each(function(){a(this).attr("name",a(this).attr("data-name"))}),a(".color-picker",i).wpColorPicker(),set_positions()}),a(".sortable").on("click",".delete",function(){var b=a(this),c=b.attr("data-confirm"),d=!1;if("undefined"!=typeof c&&""!==c)var d=confirm(c);"undefined"!=typeof c&&""!=c&&1!=d||b.closest("li").slideUp("fast",function(){a(this).remove()})}),a(".sortable").sortable({helper:"clone",items:"li",handle:".handle",stop:function(){set_positions()}}),a(".check-list-wrapper").each(function(){new List(this,{valueNames:["user_name"],page:20,pagination:{name:"list-pagination",paginationClass:"list-pagination",innerWindow:3}})}),a(".check-list").on("change",".check-list-input",function(b){var c=a(this),d=a(b.delegateTarget),e=d.attr("data-target"),f=d.attr("data-name"),g=c.val(),h=a(e),i=c.val();if(c.is(":checked")){var j=a('<input type="hidden">');a(j).attr("name",f).val(g).appendTo(h)}else a('[value="'+i+'"]',h).remove()}),a(".button-add-user").on("click",function(){var b=a("#form-new-user");a(".error",b).remove();var c={action:"kanban_register_user"};return a("input",b).each(function(){var b=a(this);c[b.attr("id")]=b.val()}),a.post(ajaxurl,c).done(function(c){var d="error",e="";try{c.success?(d="updated",e="User created and emailed."):e=c.data.error}catch(a){e="There was an error creating the user."}""!=e&&a('<div class="'+d+'"><p>'+e+"</p></div>").prependTo(b)}).fail(function(c){var d="error",e="There was an error creating the user.";a('<div class="'+d+'"><p>'+e+"</p></div>").prependTo(b)}),!1}),a("#default_assigned_switch").on("change",'[type="checkbox"]',function(b){var c=a(b.delegateTarget);a(":checked",c).not(this).prop("checked",!1),a("#default_assigned_to").is(":checked")&&a("#tr-default_assigned_to").not(":visible")?a("#tr-default_assigned_to").show():a("#tr-default_assigned_to").is(":visible")&&(a("#tr-default_assigned_to").hide(),a("#default_assigned_to_select").val(a("#default_assigned_to_select option:last").val()))}),a("#button-load-diagnostic-info").on("click",function(){var b={action:"kanban_diagnostic_info"};return a.get(ajaxurl,b).done(function(b){a("#kanban-diagnostic-info").val("Sent!\n\n"+b);var c={request:"diagnostic info for "+kanban.url_board,message:"diagnostic info:\n\n"+b,kanban_nonce:kanban.kanban_nonce};a.ajax({method:"POST",url:kanban.url_contact,data:c})}),!1})});