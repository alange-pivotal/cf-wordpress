function set_positions(){jQuery(".sortable").each(function(){jQuery("li",this).each(function(e){for(var t=e+"";t.length<3;)t="0"+t;jQuery(".position",this).val(t)})})}jQuery(function($){function e(e){$('.nav-tab[href="'+e+'"]').addClass("nav-tab-active"),$(".nav-tab").not('[href="'+e+'"]').removeClass("nav-tab-active"),$(".tab").not(e).hide(),$(e).show()}$(".nav-tab").on("click",function(){var t=$(this),a=t.attr("href");e(a);var n=a.replace(/^.*#/,""),o=document.getElementById(n);return o.id=n+"-tmp",window.location.hash=a,o.id=n,!1}),"undefined"!=typeof window.location.hash&&""!==window.location.hash&&e(window.location.hash),$(".color-picker").wpColorPicker(),$(".slide-toggle").on("click",function(){var e=$(this).attr("href");return $(e).slideToggle("fast"),!1}),$(".button-sortable-add").on("click",function(){var e=$(this),a=e.attr("data-t"),n=new t($("#"+a).html()),o=e.closest(".tab"),i=$(".sortable",o),r=$("li.new",i).length,s=n.render();s=s.replace(/\[count\]/g,"["+r+"]");var c=$(s).addClass("new").appendTo(i);$("[data-name]",c).each(function(){$(this).attr("name",$(this).attr("data-name"))}),$(".color-picker",c).wpColorPicker(),set_positions()}),$(".sortable").on("click",".delete",function(){var e=$(this),t=e.attr("data-confirm"),a=!1;if("undefined"!=typeof t&&""!==t)var a=confirm(t);"undefined"!=typeof t&&""!=t&&1!=a||e.closest("li").slideUp("fast",function(){$(this).remove()})}),$(".sortable").sortable({helper:"clone",items:"li",handle:".handle",stop:function(){set_positions()}}),$(".users-filter").on("keyup",function(){var e=$(this),t=e.val(),a=$.trim(t.toLowerCase()),n=e.closest("fieldset");return""==a?($("label:hidden",n).slideDown("fast"),!1):void $("label",n).each(function(){var e=$(this),t=e.text(),n=$.trim(t.toLowerCase());n.search(a)>-1?e.slideDown("fast"):e.is(":visible")&&e.slideUp("fast")})}),$(".button-add-user").on("click",function(){var e=$("#form-new-user");$(".error",e).remove();var t={action:"kanban_register_user"};return $("input",e).each(function(){var e=$(this);t[e.attr("id")]=e.val()}),$.post(ajaxurl,t).done(function(t){var a="error",n="";try{t.success?(a="updated",n="User created and emailed."):n=t.data.error}catch(e){n="There was an error creating the user."}""!=n&&$('<div class="'+a+'"><p>'+n+"</p></div>").prependTo(e)}).fail(function(t){var a="error",n="There was an error creating the user.";$('<div class="'+a+'"><p>'+n+"</p></div>").prependTo(e)}),!1}),$("#default_assigned_switch").on("change",'[type="checkbox"]',function(e){var t=$(e.delegateTarget);$(":checked",t).not(this).prop("checked",!1),$("#default_assigned_to").is(":checked")&&$("#tr-default_assigned_to").not(":visible")?$("#tr-default_assigned_to").show():$("#tr-default_assigned_to").is(":visible")&&($("#tr-default_assigned_to").hide(),$("#default_assigned_to_select").val($("#default_assigned_to_select option:last").val()))}),$("#button-load-diagnostic-info").on("click",function(){var e={action:"kanban_diagnostic_info"};return $.get(ajaxurl,e).done(function(e){$("#kanban-diagnostic-info").val("Sent!\n\n"+e);var t={request:"diagnostic info for "+kanban.url_board,message:"diagnostic info:\n\n"+e,kanban_nonce:kanban.kanban_nonce};$.ajax({method:"POST",url:kanban.url_contact,data:t})}),!1})});